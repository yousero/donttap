function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}document.getElementById("app");var t=document.getElementById("canvas"),n=document.getElementById("healthbar"),r=t.getContext("2d"),o="#990003",i="#f1f7ff",a="#00BFFF";n.style.backgroundColor=i,n.style.width="0%";var c=100;function l(){c=100,window.innerWidth<446?c=72:window.innerWidth>1024&&(c=128),c=100,t.height=4*(c+0)+0,t.width=4*(c+0)+0}function s(e,t,n){r.fillStyle=n;var o=t*(c+0)+0,i=e*(c+0)+0;r.fillRect(i,o,c,c)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;r.fillStyle=e,r.fillRect(0,0,(c+0)*4+0,(c+0)*4+0),r.fillStyle=t;for(var n=0;n<4;++n)for(var a=0;a<4;++a){var l=n*(c+0)+0,s=a*(c+0)+0;r.fillRect(s,l,c,c)}}l();var u=0,f=0,v=0,h=1,m=0,g="STOP",y=250,w=new Date,p=new Date,S=new Date,E=new Date;E.setSeconds(-120);var N=[],L=[],b=document.getElementById("information");function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement("div");r.classList.add("stats");var o=document.createElement("div");o.classList.add("stats-label"),o.textContent=e,r.appendChild(o);var i=document.createElement("div");i.classList.add("stats-value"),i.textContent=t,r.appendChild(i),n&&(r.title=n),b.appendChild(r)}function I(e){return"."==(tNumber=String(Math.round(100*e)/100)).slice(-2,-1)&&(tNumber+="0"),"."!=tNumber.slice(-3,-2)&&(tNumber+=".00"),tNumber}function D(){if("RUNNING"==g&&(E=new Date,g="GAMEOVER",n.style.width="0%",d(o,a),f)){var e=(E-p)/1e3;u=f/e,h=f?f/(f+v):1;var t=Math.floor(e/60);if(t>0){var r=Math.floor(e)%60;r<10&&(r="0"+r),M("time","".concat(t,":").concat(r))}else M("time",I(e)+"s");if(M("clicks",String(f)),M("speed",I(u),"clicks per second"),M("accuracy",I(100*h)+"%",v+" misses"),b.classList.remove("hidden"),localStorage){var i=[];if(localStorage.records)try{i=JSON.parse(localStorage.records)}catch(e){delete localStorage.records}i.length>=0&&(i.push([E.getTime(),e,f,v].join(";")),localStorage.records=JSON.stringify(i))}}}function k(){if("RUNNING"==g){var e=new Date;if((msClock=E-e)<=0)return D();if((e-p)/1e3>0){var t=E-S,r=100*msClock/t;n.style.width=r+"%",t>=6e4&&r<=25&&S.setMilliseconds(S.getMilliseconds()+6.5*t/10)}else n.style.width="0%";requestAnimationFrame(k)}}function R(){var t,n=Math.floor(Math.random()*L.length),r=function(e){if(Array.isArray(e))return e}(t=L[n].split("."))||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),2!==i.length);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw r}}return i}}(t,2)||function(t,n){if(t){if("string"==typeof t)return e(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();s(r[0],r[1],a),L.splice(n,1)}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(!e&&new Date-E<1500)){b.classList.add("hidden"),b.innerHTML="",L=[];for(var t=0;t<4;++t)for(var n=0;n<4;++n)L.push("".concat(n,".").concat(t));d();for(var r=0;r<3;++r)R();u=0,f=0,v=0,m=0,h=1,g="RUNNING",y=250,p=new Date,S=new Date,(E=new Date).setSeconds(E.getSeconds()+32),w=p,N=[],requestAnimationFrame(k)}}function C(e){if(f+=1,"RUNNING"==g){e&&(n=e.offsetX,r=e.offsetY,"TouchEvent"in window&&e instanceof TouchEvent&&(n=e.touches[0].clientX-t.offsetLeft,r=e.touches[0].clientY-t.offsetTop));var n,r,o=Math.floor((n-n%(c+0))/c),a=Math.floor((r-r%(c+0))/c);L.includes("".concat(o,".").concat(a))||a>=4||o>=4?(E.setMilliseconds(E.getMilliseconds()-y),v+=1,m+=1):(E.setMilliseconds(E.getMilliseconds()+y),m=0,s(o,a,i),R(),L.push("".concat(o,".").concat(a))),w=new Date,N.unshift(w),m>=4&&D(),y>200?y-=.8:y>166?y-=.125:y>142?y-=1/150:y>125&&(y-=.0016)}else A();window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}d(o,a);var T=document.getElementById("settings");T.querySelector("#toggle-bar").addEventListener("click",function(e){var t=parseInt(n.style.width);t+30>100?n.style.width="0%":n.style.width=String(t+30)+"%"}),T.querySelector("#toggle-info").addEventListener("click",function(e){b.innerHTML||(M("time","0s"),M("clicks","0"),M("speed","0"),M("accuracy",String(Math.floor(100*h))+"%")),b.classList.toggle("hidden")}),T.querySelector("#show-first-round").addEventListener("click",function(e){b.classList.add("hidden"),b.innerHTML="",L=[];for(var t=0;t<4;++t)for(var n=0;n<4;++n)L.push("".concat(n,".").concat(t));d();for(var r=0;r<3;++r)R()}),t.addEventListener("touchstart",function(e){return C(e),e.preventDefault(),!1}),t.addEventListener("mousedown",C),t.parentElement.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),document.body.addEventListener("keydown",function(e){["Space","Escape"].includes(e.code)&&A(!0)}),window.addEventListener("resize",function(e){"RUNNING"!=g&&(l(),d(o,a))}),"serviceWorker"in navigator&&"file:"!=window.location.protocol&&navigator.serviceWorker.register(new URL("sw.js",location));
//# sourceMappingURL=app.f162fa80.js.map
