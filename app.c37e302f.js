!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequire94c2;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},n.parcelRequire94c2=o);var a=o.register;function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}a("iRM3k",function(t,n){e(t.exports,"register",function(){return r},function(e){return r=e});var r,i=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})}}),a("gql9y",function(t,n){e(t.exports,"getBundleURL",function(){return r},function(e){return r=e});var r,i={};r=function(e){var t=i[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),i[e]=t),t}}),o("iRM3k").register(o("gql9y").getBundleURL("5ZjFj"),JSON.parse('["5ZjFj","app.c37e302f.js","d1tuc","sw.js"]')),document.getElementById("app");var l=document.getElementById("canvas"),s=document.getElementById("healthbar"),d=l.getContext("2d"),u="#990003",f="#f1f7ff",h="#00BFFF";s.style.backgroundColor=f,s.style.width="0%";var v=4,E=4,g=100,p=3;function m(){var e=Math.min(window.innerWidth-20,600),t=.6*window.innerHeight;g=Math.min(g=window.innerWidth<446?Math.min(64,Math.floor(e/E)):window.innerWidth>1024?Math.min(128,Math.floor(e/E)):Math.min(100,Math.floor(e/E)),Math.floor(t/v)),l.height=v*(g+0)+0,l.width=E*(g+0)+0}function S(e,t,n){d.fillStyle=n;var r=t*(g+0)+0,i=e*(g+0)+0;d.fillRect(i,r,g,g)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;d.fillStyle=e,d.fillRect(0,0,(g+0)*v+0,(g+0)*E+0),d.fillStyle=t;for(var n=0;n<v;++n)for(var r=0;r<E;++r){var i=n*(g+0)+0,o=r*(g+0)+0;d.fillRect(o,i,g,g)}}m();var y=0,I=0,M=0,N=1,L=0,R={STOP:"STOP",RUNNING:"RUNNING",GAMEOVER:"GAMEOVER"},_={INITIAL_MS_TO_LIFE:250,MIN_MS_TO_LIFE:125,BREAK_POINT:4,INITIAL_ACTIVE_CELLS:3,GRID_SIZE:4,SPEED_INCREASE_RATES:{FAST:.8,MEDIUM:.125,SLOW:1/150,VERY_SLOW:.0016}},T=R.STOP,A=250,b=new Date,D=new Date,O=new Date,C=new Date;C.setSeconds(-120);var F=[],U=[],x=document.getElementById("information");function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement("div");r.classList.add("stats");var i=document.createElement("div");i.classList.add("stats-label"),i.textContent=e,r.appendChild(i);var o=document.createElement("div");o.classList.add("stats-value"),o.textContent=t,r.appendChild(o),n&&(r.title=n),x.appendChild(r)}function j(e){var t=String(Math.round(100*e)/100);return"."==t.slice(-2,-1)&&(t+="0"),"."!=t.slice(-3,-2)&&(t+=".00"),t}function G(){if(T===R.RUNNING&&(C=new Date,T=R.GAMEOVER,s.style.width="0%",w(u,h),I)){var e=(C-D)/1e3;y=I/e,N=I/(I+M),function(e,t,n,r,i){x.innerHTML="";var o=Math.floor(e/60);if(o>0){var a=String(Math.floor(e)%60).padStart(2,"0");k("time","".concat(o,":").concat(a))}else k("time",j(e)+"s");k("clicks",String(t)),k("speed",j(r),"clicks per second"),k("accuracy",j(100*i)+"%","".concat(n," misses")),x.classList.remove("hidden")}(e,I,M,y,N),function(e,t,n,r){if(localStorage){var i=[];try{i=JSON.parse(localStorage.records||"[]")}catch(e){console.error("Failed to parse records:",e),localStorage.records="[]";return}i.push({timestamp:e.getTime(),duration:t,clicks:n,misses:r,accuracy:n/(n+r),cps:n/t}),i.length>100&&(i=i.slice(-100)),localStorage.records=JSON.stringify(i)}}(C,e,I,M)}}function B(){if("RUNNING"==T){var e=new Date,t=C-e;if(t<=0)return G();if((e-D)/1e3>0){var n=C-O,r=100*t/n;s.style.width=r+"%",n>=6e4&&r<=25&&O.setMilliseconds(O.getMilliseconds()+6.5*n/10)}else s.style.width="0%";requestAnimationFrame(B)}}function P(){var e,t=Math.floor(Math.random()*U.length),n=function(e){if(Array.isArray(e))return e}(e=U[t].split("."))||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,c=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),2!==o.length);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(c)throw r}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();S(n[0],n[1],h),U.splice(t,1)}function q(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(!e&&new Date-C<1500)){x.classList.add("hidden"),x.innerHTML="",U=[];for(var t=0;t<v;++t)for(var n=0;n<E;++n)U.push("".concat(n,".").concat(t));w();for(var r=0;r<p;++r)P();y=0,I=0,M=0,L=0,N=1,T="RUNNING",A=250,D=new Date,O=new Date,(C=new Date).setSeconds(C.getSeconds()+32),b=D,F=[],requestAnimationFrame(B)}}function W(e){if(T!==R.RUNNING){q();return}I+=1;var t,n,r,i,o,a=(r=l.getBoundingClientRect(),i=l.width/r.width,o=l.height/r.height,e instanceof TouchEvent?(t=(e.touches[0].clientX-r.left)*i,n=(e.touches[0].clientY-r.top)*o):(t=e.offsetX*i,n=e.offsetY*o),{x:t,y:n}),c=a.x,s=a.y,d=Math.floor((c-c%(g+0))/g),u=Math.floor((s-s%(g+0))/g);U.includes("".concat(d,".").concat(u))||u>=v||d>=E?(C.setMilliseconds(C.getMilliseconds()-A),M+=1,L+=1):(C.setMilliseconds(C.getMilliseconds()+A),L=0,S(d,u,f),P(),U.push("".concat(d,".").concat(u))),b=new Date,F.unshift(b),L>=_.BREAK_POINT&&G(),A>200?A-=_.SPEED_INCREASE_RATES.FAST:A>166?A-=_.SPEED_INCREASE_RATES.MEDIUM:A>142?A-=_.SPEED_INCREASE_RATES.SLOW:A>_.MIN_MS_TO_LIFE&&(A-=_.SPEED_INCREASE_RATES.VERY_SLOW),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}w(u,h);var H=document.getElementById("settings");H.querySelector("#toggle-bar").addEventListener("click",function(e){var t=parseInt(s.style.width);t+30>100?s.style.width="0%":s.style.width=String(t+30)+"%"}),H.querySelector("#toggle-info").addEventListener("click",function(e){x.innerHTML||(k("time","0s"),k("clicks","0"),k("speed","0"),k("accuracy",String(Math.floor(100*N))+"%")),x.classList.toggle("hidden")}),H.querySelector("#show-first-round").addEventListener("click",function(e){x.classList.add("hidden"),x.innerHTML="",U=[];for(var t=0;t<v;++t)for(var n=0;n<E;++n)U.push("".concat(n,".").concat(t));w();for(var r=0;r<p;++r)P()});var V={};V=o("gql9y").getBundleURL("5ZjFj")+"sw.js",document.addEventListener("touchmove",function(e){e.target===l&&e.preventDefault()},{passive:!1}),window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){T!==R.RUNNING&&(m(),w(u,h))},100)}),v=E=_.GRID_SIZE,p=_.INITIAL_ACTIVE_CELLS,A=_.INITIAL_MS_TO_LIFE,m(),w(u,h),l.addEventListener("touchstart",function(e){return W(e),e.preventDefault(),!1},{passive:!1}),l.addEventListener("mousedown",function(e){W(e)}),l.parentElement.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),document.body.addEventListener("keydown",function(e){("Space"===e.code||"Escape"===e.code)&&q(!0)}),window.addEventListener("resize",function(){T!==R.RUNNING&&(m(),w(u,h))}),"serviceWorker"in navigator&&"file:"!==window.location.protocol&&navigator.serviceWorker.register(V)}();
//# sourceMappingURL=app.c37e302f.js.map
