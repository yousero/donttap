!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire94c2;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire94c2=o);var i=o.register;function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}i("iRM3k",function(t,n){e(t.exports,"register",function(){return r},function(e){return r=e});var r,o=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})}}),i("gql9y",function(t,n){e(t.exports,"getBundleURL",function(){return r},function(e){return r=e});var r,o={};r=function(e){var t=o[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),o[e]=t),t}}),o("iRM3k").register(o("gql9y").getBundleURL("5ZjFj"),JSON.parse('["5ZjFj","app.662e8d39.js","d1tuc","sw.js"]')),document.getElementById("app");var c=document.getElementById("canvas"),l=document.getElementById("healthbar"),s=c.getContext("2d"),d="#990003",u="#f1f7ff",f="#00BFFF";l.style.backgroundColor=u,l.style.width="0%";var v=4,E=4,g=100,h=3;function p(){g=window.innerWidth<446?64:window.innerWidth>1024?128:100,c.height=v*(g+0)+0,c.width=E*(g+0)+0}function S(e,t,n){s.fillStyle=n;var r=t*(g+0)+0,o=e*(g+0)+0;s.fillRect(o,r,g,g)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;s.fillStyle=e,s.fillRect(0,0,(g+0)*v+0,(g+0)*E+0),s.fillStyle=t;for(var n=0;n<v;++n)for(var r=0;r<E;++r){var o=n*(g+0)+0,i=r*(g+0)+0;s.fillRect(i,o,g,g)}}p();var y=0,w=0,I=0,L=1,N=0,R={STOP:"STOP",RUNNING:"RUNNING",GAMEOVER:"GAMEOVER"},M={INITIAL_MS_TO_LIFE:250,MIN_MS_TO_LIFE:125,BREAK_POINT:4,INITIAL_ACTIVE_CELLS:3,GRID_SIZE:4,SPEED_INCREASE_RATES:{FAST:.8,MEDIUM:.125,SLOW:1/150,VERY_SLOW:.0016}},_=R.STOP,A=250,T=new Date,b=new Date,O=new Date,D=new Date;D.setSeconds(-120);var C=[],F=[],U=document.getElementById("information");function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement("div");r.classList.add("stats");var o=document.createElement("div");o.classList.add("stats-label"),o.textContent=e,r.appendChild(o);var i=document.createElement("div");i.classList.add("stats-value"),i.textContent=t,r.appendChild(i),n&&(r.title=n),U.appendChild(r)}function x(e){var t=String(Math.round(100*e)/100);return"."==t.slice(-2,-1)&&(t+="0"),"."!=t.slice(-3,-2)&&(t+=".00"),t}function j(){if(_===R.RUNNING&&(D=new Date,_=R.GAMEOVER,l.style.width="0%",m(d,f),w)){var e=(D-b)/1e3;y=w/e,L=w/(w+I),function(e,t,n,r,o){U.innerHTML="";var i=Math.floor(e/60);if(i>0){var a=String(Math.floor(e)%60).padStart(2,"0");k("time","".concat(i,":").concat(a))}else k("time",x(e)+"s");k("clicks",String(t)),k("speed",x(r),"clicks per second"),k("accuracy",x(100*o)+"%","".concat(n," misses")),U.classList.remove("hidden")}(e,w,I,y,L),function(e,t,n,r){if(localStorage){var o=[];try{o=JSON.parse(localStorage.records||"[]")}catch(e){console.error("Failed to parse records:",e),localStorage.records="[]";return}o.push({timestamp:e.getTime(),duration:t,clicks:n,misses:r,accuracy:n/(n+r),cps:n/t}),o.length>100&&(o=o.slice(-100)),localStorage.records=JSON.stringify(o)}}(D,e,w,I)}}function B(){if("RUNNING"==_){var e=new Date,t=D-e;if(t<=0)return j();if((e-b)/1e3>0){var n=D-O,r=100*t/n;l.style.width=r+"%",n>=6e4&&r<=25&&O.setMilliseconds(O.getMilliseconds()+6.5*n/10)}else l.style.width="0%";requestAnimationFrame(B)}}function G(){var e,t=Math.floor(Math.random()*F.length),n=function(e){if(Array.isArray(e))return e}(e=F[t].split("."))||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,c=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),2!==i.length);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(c)throw r}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();S(n[0],n[1],f),F.splice(t,1)}function P(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(!e&&new Date-D<1500)){U.classList.add("hidden"),U.innerHTML="",F=[];for(var t=0;t<v;++t)for(var n=0;n<E;++n)F.push("".concat(n,".").concat(t));m();for(var r=0;r<h;++r)G();y=0,w=0,I=0,N=0,L=1,_="RUNNING",A=250,b=new Date,O=new Date,(D=new Date).setSeconds(D.getSeconds()+32),T=b,C=[],requestAnimationFrame(B)}}function q(e){if(_!==R.RUNNING){P();return}if(w+=1,e&&(t=e.offsetX,n=e.offsetY,"TouchEvent"in window&&e instanceof TouchEvent)){var t,n,r=c.getBoundingClientRect();t=e.touches[0].clientX-r.left,n=e.touches[0].clientY-r.top}var o=Math.floor((t-t%(g+0))/g),i=Math.floor((n-n%(g+0))/g);F.includes("".concat(o,".").concat(i))||i>=v||o>=E?(D.setMilliseconds(D.getMilliseconds()-A),I+=1,N+=1):(D.setMilliseconds(D.getMilliseconds()+A),N=0,S(o,i,u),G(),F.push("".concat(o,".").concat(i))),T=new Date,C.unshift(T),N>=M.BREAK_POINT&&j(),A>200?A-=M.SPEED_INCREASE_RATES.FAST:A>166?A-=M.SPEED_INCREASE_RATES.MEDIUM:A>142?A-=M.SPEED_INCREASE_RATES.SLOW:A>M.MIN_MS_TO_LIFE&&(A-=M.SPEED_INCREASE_RATES.VERY_SLOW),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}m(d,f);var W=document.getElementById("settings");W.querySelector("#toggle-bar").addEventListener("click",function(e){var t=parseInt(l.style.width);t+30>100?l.style.width="0%":l.style.width=String(t+30)+"%"}),W.querySelector("#toggle-info").addEventListener("click",function(e){U.innerHTML||(k("time","0s"),k("clicks","0"),k("speed","0"),k("accuracy",String(Math.floor(100*L))+"%")),U.classList.toggle("hidden")}),W.querySelector("#show-first-round").addEventListener("click",function(e){U.classList.add("hidden"),U.innerHTML="",F=[];for(var t=0;t<v;++t)for(var n=0;n<E;++n)F.push("".concat(n,".").concat(t));m();for(var r=0;r<h;++r)G()});var V={};V=o("gql9y").getBundleURL("5ZjFj")+"sw.js",v=E=M.GRID_SIZE,h=M.INITIAL_ACTIVE_CELLS,A=M.INITIAL_MS_TO_LIFE,p(),m(d,f),c.addEventListener("touchstart",function(e){return q(e),e.preventDefault(),!1},{passive:!1}),c.addEventListener("mousedown",function(e){q(e)}),c.parentElement.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),document.body.addEventListener("keydown",function(e){("Space"===e.code||"Escape"===e.code)&&P(!0)}),window.addEventListener("resize",function(){_!==R.RUNNING&&(p(),m(d,f))}),"serviceWorker"in navigator&&"file:"!==window.location.protocol&&navigator.serviceWorker.register(V)}();
//# sourceMappingURL=app.662e8d39.js.map
