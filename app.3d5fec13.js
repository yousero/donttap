function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=t.parcelRequire94c2;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequire94c2=o);var r=o.register;r("jz7dE",function(t,n){e(t.exports,"register",function(){return i},function(e){return i=e});var i,o=new Map;i=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})}}),r("jfr6k",function(t,n){e(t.exports,"getBundleURL",function(){return i},function(e){return i=e});var i,o={};i=function(e){var t=o[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),o[e]=t),t}}),o("jz7dE").register(o("jfr6k").getBundleURL("5iIeY"),JSON.parse('["5iIeY","app.3d5fec13.js","d1tuc","sw.js"]')),document.getElementById("app");const l=document.getElementById("canvas"),s=document.getElementById("healthbar"),c=l.getContext("2d"),a="#990003",d="#f1f7ff",f="#00BFFF";s.style.backgroundColor=d,s.style.width="0%";let u=4,E=4,S=100,p=3;function g(){S=window.innerWidth<446?64:window.innerWidth>1024?128:100,l.height=u*(S+0)+0,l.width=E*(S+0)+0}function h(e,t,n){c.fillStyle=n;let i=t*(S+0)+0,o=e*(S+0)+0;c.fillRect(o,i,S,S)}function I(e=a,t=d){c.fillStyle=e,c.fillRect(0,0,(S+0)*u+0,(S+0)*E+0),c.fillStyle=t;for(let e=0;e<u;++e)for(let t=0;t<E;++t){let n=e*(S+0)+0,i=t*(S+0)+0;c.fillRect(i,n,S,S)}}g();let w=0,m=0,L=0,N=1,R=0;const _={STOP:"STOP",RUNNING:"RUNNING",GAMEOVER:"GAMEOVER"},v={INITIAL_MS_TO_LIFE:250,MIN_MS_TO_LIFE:125,BREAK_POINT:4,INITIAL_ACTIVE_CELLS:3,GRID_SIZE:4,SPEED_INCREASE_RATES:{FAST:.8,MEDIUM:.125,SLOW:1/150,VERY_SLOW:.0016}};let y=_.STOP,M=250,T=new Date,A=new Date,D=new Date,O=new Date;O.setSeconds(-120);let C=[],b=[];const k=document.getElementById("information");function U(e,t,n=null){let i=document.createElement("div");i.classList.add("stats");let o=document.createElement("div");o.classList.add("stats-label"),o.textContent=e,i.appendChild(o);let r=document.createElement("div");r.classList.add("stats-value"),r.textContent=t,i.appendChild(r),n&&(i.title=n),k.appendChild(i)}function F(e){let t=String(Math.round(100*e)/100);return"."==t.slice(-2,-1)&&(t+="0"),"."!=t.slice(-3,-2)&&(t+=".00"),t}function x(){if(y===_.RUNNING&&(O=new Date,y=_.GAMEOVER,s.style.width="0%",I(a,f),m)){let e=(O-A)/1e3;w=m/e,N=m/(m+L),function(e,t,n,i,o){k.innerHTML="";let r=Math.floor(e/60);if(r>0){let t=String(Math.floor(e)%60).padStart(2,"0");U("time",`${r}:${t}`)}else U("time",F(e)+"s");U("clicks",String(t)),U("speed",F(i),"clicks per second"),U("accuracy",F(100*o)+"%",`${n} misses`),k.classList.remove("hidden")}(e,m,L,w,N),function(e,t,n,i){if(!localStorage)return;let o=[];try{o=JSON.parse(localStorage.records||"[]")}catch(e){console.error("Failed to parse records:",e),localStorage.records="[]";return}o.push({timestamp:e.getTime(),duration:t,clicks:n,misses:i,accuracy:n/(n+i),cps:n/t}),o.length>100&&(o=o.slice(-100)),localStorage.records=JSON.stringify(o)}(O,e,m,L)}}function $(){if("RUNNING"!=y)return;let e=new Date,t=O-e;if(t<=0)return x();if((e-A)/1e3>0){let e=O-D,n=100*t/e;s.style.width=n+"%",e>=6e4&&n<=25&&D.setMilliseconds(D.getMilliseconds()+6.5*e/10)}else s.style.width="0%";requestAnimationFrame($)}function B(){let e=Math.floor(Math.random()*b.length),[t,n]=b[e].split(".");h(t,n,f),b.splice(e,1)}function G(e=!1){if(!(!e&&new Date-O<1500)){k.classList.add("hidden"),k.innerHTML="",b=[];for(let e=0;e<u;++e)for(let t=0;t<E;++t)b.push(`${t}.${e}`);I();for(let e=0;e<p;++e)B();w=0,m=0,L=0,R=0,N=1,y="RUNNING",M=250,A=new Date,D=new Date,(O=new Date).setSeconds(O.getSeconds()+32),T=A,C=[],requestAnimationFrame($)}}function P(e){let t,n;if(y!==_.RUNNING){G();return}if(m+=1,e&&(t=e.offsetX,n=e.offsetY,"TouchEvent"in window&&e instanceof TouchEvent)){let i=l.getBoundingClientRect();t=e.touches[0].clientX-i.left,n=e.touches[0].clientY-i.top}let i=Math.floor((t-t%(S+0))/S),o=Math.floor((n-n%(S+0))/S);b.includes(`${i}.${o}`)||o>=u||i>=E?(O.setMilliseconds(O.getMilliseconds()-M),L+=1,R+=1):(O.setMilliseconds(O.getMilliseconds()+M),R=0,h(i,o,d),B(),b.push(`${i}.${o}`)),T=new Date,C.unshift(T),R>=v.BREAK_POINT&&x(),M>200?M-=v.SPEED_INCREASE_RATES.FAST:M>166?M-=v.SPEED_INCREASE_RATES.MEDIUM:M>142?M-=v.SPEED_INCREASE_RATES.SLOW:M>v.MIN_MS_TO_LIFE&&(M-=v.SPEED_INCREASE_RATES.VERY_SLOW),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}I(a,f);const j=document.getElementById("settings");j.querySelector("#toggle-bar").addEventListener("click",function(e){let t=parseInt(s.style.width);t+30>100?s.style.width="0%":s.style.width=String(t+30)+"%"}),j.querySelector("#toggle-info").addEventListener("click",function(e){k.innerHTML||(U("time","0s"),U("clicks","0"),U("speed","0"),U("accuracy",String(Math.floor(100*N))+"%")),k.classList.toggle("hidden")}),j.querySelector("#show-first-round").addEventListener("click",function(e){k.classList.add("hidden"),k.innerHTML="",b=[];for(let e=0;e<u;++e)for(let t=0;t<E;++t)b.push(`${t}.${e}`);I();for(let e=0;e<p;++e)B()});var W={};W=o("jfr6k").getBundleURL("5iIeY")+"sw.js",u=E=v.GRID_SIZE,p=v.INITIAL_ACTIVE_CELLS,M=v.INITIAL_MS_TO_LIFE,g(),I(a,f),l.addEventListener("touchstart",function(e){return P(e),e.preventDefault(),!1},{passive:!1}),l.addEventListener("mousedown",function(e){P(e)}),l.parentElement.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),document.body.addEventListener("keydown",function(e){("Space"===e.code||"Escape"===e.code)&&G(!0)}),window.addEventListener("resize",function(){y!==_.RUNNING&&(g(),I(a,f))}),"serviceWorker"in navigator&&"file:"!==window.location.protocol&&navigator.serviceWorker.register(W);
//# sourceMappingURL=app.3d5fec13.js.map
