let e;function t(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},o={},r=n.parcelRequire94c2;null==r&&((r=function(e){if(e in i)return i[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},n.parcelRequire94c2=r);var l=r.register;l("jz7dE",function(e,n){t(e.exports,"register",function(){return i},function(e){return i=e});var i,o=new Map;i=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})}}),l("jfr6k",function(e,n){t(e.exports,"getBundleURL",function(){return i},function(e){return i=e});var i,o={};i=function(e){var t=o[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),o[e]=t),t}}),r("jz7dE").register(r("jfr6k").getBundleURL("5iIeY"),JSON.parse('["5iIeY","app.ca245600.js","d1tuc","sw.js"]')),document.getElementById("app");const s=document.getElementById("canvas"),c=document.getElementById("healthbar"),a=s.getContext("2d"),d="#990003",f="#f1f7ff",u="#00BFFF";c.style.backgroundColor=f,c.style.width="0%";let E=4,h=4,g=100,p=3;function S(){let e=Math.min(window.innerWidth-20,600),t=.6*window.innerHeight;g=Math.min(g=window.innerWidth<446?Math.min(64,Math.floor(e/h)):window.innerWidth>1024?Math.min(128,Math.floor(e/h)):Math.min(100,Math.floor(e/h)),Math.floor(t/E)),s.height=E*(g+0)+0,s.width=h*(g+0)+0}function m(e,t,n){a.fillStyle=n;let i=t*(g+0)+0,o=e*(g+0)+0;a.fillRect(o,i,g,g)}function w(e=d,t=f){a.fillStyle=e,a.fillRect(0,0,(g+0)*E+0,(g+0)*h+0),a.fillStyle=t;for(let e=0;e<E;++e)for(let t=0;t<h;++t){let n=e*(g+0)+0,i=t*(g+0)+0;a.fillRect(i,n,g,g)}}S();let I=0,M=0,N=0,L=1,v=0;const R={STOP:"STOP",RUNNING:"RUNNING",GAMEOVER:"GAMEOVER"},_={INITIAL_MS_TO_LIFE:250,MIN_MS_TO_LIFE:125,BREAK_POINT:4,INITIAL_ACTIVE_CELLS:3,GRID_SIZE:4,SPEED_INCREASE_RATES:{FAST:.8,MEDIUM:.125,SLOW:1/150,VERY_SLOW:.0016}};let y=R.STOP,T=250,A=new Date,D=new Date,O=new Date,C=new Date;C.setSeconds(-120);let b=[],U=[];const k=document.getElementById("information");function x(e,t,n=null){let i=document.createElement("div");i.classList.add("stats");let o=document.createElement("div");o.classList.add("stats-label"),o.textContent=e,i.appendChild(o);let r=document.createElement("div");r.classList.add("stats-value"),r.textContent=t,i.appendChild(r),n&&(i.title=n),k.appendChild(i)}function F(e){let t=String(Math.round(100*e)/100);return"."==t.slice(-2,-1)&&(t+="0"),"."!=t.slice(-3,-2)&&(t+=".00"),t}function G(){if(y===R.RUNNING&&(C=new Date,y=R.GAMEOVER,c.style.width="0%",w(d,u),M)){let e=(C-D)/1e3;I=M/e,L=M/(M+N),function(e,t,n,i,o){k.innerHTML="";let r=Math.floor(e/60);if(r>0){let t=String(Math.floor(e)%60).padStart(2,"0");x("time",`${r}:${t}`)}else x("time",F(e)+"s");x("clicks",String(t)),x("speed",F(i),"clicks per second"),x("accuracy",F(100*o)+"%",`${n} misses`),k.classList.remove("hidden")}(e,M,N,I,L),function(e,t,n,i){if(!localStorage)return;let o=[];try{o=JSON.parse(localStorage.records||"[]")}catch(e){console.error("Failed to parse records:",e),localStorage.records="[]";return}o.push({timestamp:e.getTime(),duration:t,clicks:n,misses:i,accuracy:n/(n+i),cps:n/t}),o.length>100&&(o=o.slice(-100)),localStorage.records=JSON.stringify(o)}(C,e,M,N)}}function $(){if("RUNNING"!=y)return;let e=new Date,t=C-e;if(t<=0)return G();if((e-D)/1e3>0){let e=C-O,n=100*t/e;c.style.width=n+"%",e>=6e4&&n<=25&&O.setMilliseconds(O.getMilliseconds()+6.5*e/10)}else c.style.width="0%";requestAnimationFrame($)}function B(){let e=Math.floor(Math.random()*U.length),[t,n]=U[e].split(".");m(t,n,u),U.splice(e,1)}function P(e=!1){if(!(!e&&new Date-C<1500)){k.classList.add("hidden"),k.innerHTML="",U=[];for(let e=0;e<E;++e)for(let t=0;t<h;++t)U.push(`${t}.${e}`);w();for(let e=0;e<p;++e)B();I=0,M=0,N=0,v=0,L=1,y="RUNNING",T=250,D=new Date,O=new Date,(C=new Date).setSeconds(C.getSeconds()+32),A=D,b=[],requestAnimationFrame($)}}function j(e){if(y!==R.RUNNING){P();return}M+=1;let{x:t,y:n}=function(e){let t,n;let i=s.getBoundingClientRect(),o=s.width/i.width,r=s.height/i.height;return e instanceof TouchEvent?(t=(e.touches[0].clientX-i.left)*o,n=(e.touches[0].clientY-i.top)*r):(t=e.offsetX*o,n=e.offsetY*r),{x:t,y:n}}(e),i=Math.floor((t-t%(g+0))/g),o=Math.floor((n-n%(g+0))/g);U.includes(`${i}.${o}`)||o>=E||i>=h?(C.setMilliseconds(C.getMilliseconds()-T),N+=1,v+=1):(C.setMilliseconds(C.getMilliseconds()+T),v=0,m(i,o,f),B(),U.push(`${i}.${o}`)),A=new Date,b.unshift(A),v>=_.BREAK_POINT&&G(),T>200?T-=_.SPEED_INCREASE_RATES.FAST:T>166?T-=_.SPEED_INCREASE_RATES.MEDIUM:T>142?T-=_.SPEED_INCREASE_RATES.SLOW:T>_.MIN_MS_TO_LIFE&&(T-=_.SPEED_INCREASE_RATES.VERY_SLOW),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}w(d,u);const W=document.getElementById("settings");W.querySelector("#toggle-bar").addEventListener("click",function(e){let t=parseInt(c.style.width);t+30>100?c.style.width="0%":c.style.width=String(t+30)+"%"}),W.querySelector("#toggle-info").addEventListener("click",function(e){k.innerHTML||(x("time","0s"),x("clicks","0"),x("speed","0"),x("accuracy",String(Math.floor(100*L))+"%")),k.classList.toggle("hidden")}),W.querySelector("#show-first-round").addEventListener("click",function(e){k.classList.add("hidden"),k.innerHTML="",U=[];for(let e=0;e<E;++e)for(let t=0;t<h;++t)U.push(`${t}.${e}`);w();for(let e=0;e<p;++e)B()});var q={};q=r("jfr6k").getBundleURL("5iIeY")+"sw.js",document.addEventListener("touchmove",function(e){e.target===s&&e.preventDefault()},{passive:!1}),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){y!==R.RUNNING&&(S(),w(d,u))},100)}),E=h=_.GRID_SIZE,p=_.INITIAL_ACTIVE_CELLS,T=_.INITIAL_MS_TO_LIFE,S(),w(d,u),s.addEventListener("touchstart",function(e){return j(e),e.preventDefault(),!1},{passive:!1}),s.addEventListener("mousedown",function(e){j(e)}),s.parentElement.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),document.body.addEventListener("keydown",function(e){("Space"===e.code||"Escape"===e.code)&&P(!0)}),window.addEventListener("resize",function(){y!==R.RUNNING&&(S(),w(d,u))}),"serviceWorker"in navigator&&"file:"!==window.location.protocol&&navigator.serviceWorker.register(q);
//# sourceMappingURL=app.ca245600.js.map
